# 2장 단위 테스트란 무엇인가
## 2.1 '단위 테스트'의 정의
* 단위 테스트의 세 가지 속성
  1. 작은 코드 조각(단위라고도 함)을 검증하고,
  2. 빠르게 수행하고,
  3. 격리된 방식으로 처리하는 자동화된 테스트다.
* 세 가지 속성 중 '격리'가 무엇인지에 대한 의견 차이로 고전파와 런던파가 시작되었다.
### 2.1.1 격리 문제에 대한 런던파의 접근
* 런던파에서의 '격리': 테스트 대상 시스템을 협력자에게서 격리하는 것
* 의존성을 테스트 대역으로 대체해서 테스트 대상 클래스에만 집중할 수 있다.
* 장점
  * 테스트가 실패하면 어느 부분이 문제인지 확실히 알 수 있다. (= 테스트 대상에 문제가 있는 것을 바로 알 수 있다.)
  * 객체 그래프(같은 문제를 해결하는 클래스의 통신망)를 분할할 수 있다. -> 특정 문제에 대한 의존성을 분리해서 볼 수 있다는 의미인듯
  * 테스트 대상의 의존성, 그 의존성의 의존성을 다룰 필요가 없어 객체 그래프를 다시 만들지 않아도 된다.
  * 한 번에 한 클래스만 테스트하라는 지침을 도입하면 전체 단위 테스트 스위트의 구조가 간단해진다.
* 목 프레임워크: C# Moq, NSubstitute / JAVA Mockito, JMock, EasyMock
* 테스트 대역은 실행과 관련 없이 모든 종류의 가짜 의존성을 설명하는 포괄적인 용어이며, 목은 그러한 의존성의 한 종류일 뿐이다.
### 2.1.2 격리 문제에 대한 고전파의 접근
* 코드를 꼭 격리하는 방식일 필요는 없지만, 단위 테스트는 서로 격리해서 실행해야 한다.
  => 여러 단위 테스트가 실행 순서에 상관 없이 항상 성공해야 한다.
* 의존성의 종류
  * 공유(shared) 의존성: 테스트 간에 공유되고 서로의 결과에 영향을 미칠 수 있는 수단을 제공하는 의존성 (예: static mutable field, DB, 파일 시스템)
  * 비공개(private) 의존성: 공유하지 않는 의존성
  * 프로세스 외부(out-of-process) 의존성: 애플리케이션 실행 프로세스 외부에서 실행되는 의존성
* 휘발성 의존성
  * 개발자 머신에 기본 설치된 환경 외에 런타임 환경의 설정 및 구성을 요구한다. 예: 데이터베이스, API 서비스
  * 비결정적 동작을 포함한다. 예: 난수 생성기, 현재 날짜와 시간을 반환하는 클래스
* 테스트 간에 공유 상태를 일으키는 공유 의존성에 대해서는 테스트 간에 공유되거나 테스트 대역으로 대체되어야 한다.
  * 테스트마다 공유 의존성을 만들 수 없기 때문
  * 공유 의존성은 실행 프로세스 외부에 있는 경우가 많아서 호출이 오래 걸리기 때문 => 빠르게 수행되어야 한다는 전제에 어긋남
* 고전파는 단위가 반드시 클래스가 국한될 필요가 없다고 본다. => 공유 의존성이 없는 여러 클래스가 단위가 될 수 있다고 생각한다.
